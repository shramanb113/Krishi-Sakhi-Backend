generator client {
  provider = "prisma-client-js"
}

datasource db {
  provider = "postgresql"
  url      = env("DATABASE_URL")
}

model Farmer {
  id               String   @id @default(uuid())
  farmerId         String   @unique
  name             String
  phone            String?
  village          String?
  lat              Float?
  lon              Float?
  landSizeHectares Float?
  crops            String[] // array of crop names
  soilType         String?
  irrigation       String?
  language         String   @default("ml")
  createdAt        DateTime @default(now())
}


model Activity {
  id        String   @id @default(uuid())
  farmerId  String
  type      String   // e.g., sowing, irrigation, pest
  details   String
  createdAt DateTime @default(now())
}

model Message {
  id        String   @id @default(uuid())
  userId    String
  role      String   // 'user' | 'assistant'
  content   String
  createdAt DateTime @default(now())

  @@index([userId, createdAt])
}